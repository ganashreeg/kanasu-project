<!DOCTYPE html>
<html>

<head>
    <title>ಸವಾಲ್ ಪತ್ರಿಕೆ</title>
    <link href="../img/logo.jpg" rel="icon">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="Paper" content="Daily News ">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" type="text/css" href="../css/material.css">
    <link rel="stylesheet" type="text/css" href="../css/common-style.css">
    <link rel="stylesheet" type="text/css" href="../css/simplePagination.css">

    <style>
        .demo-layout-waterfall .mdl-layout__header-row .mdl-navigation__link:last-of-type {
            padding-right: 0;
        }
    </style>
</head>

<body>
    <div class="demo-layout-waterfall mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <!-- Top Navigation bar -->
        <header class="android-header mdl-layout__header mdl-layout__header--waterfall">
            <div class="mdl-layout__header-row">
                <span class="android-title mdl-layout-title">
						<img class="android-logo-image" src="../img/savallogo.png">
					</span>
                <!-- Add spacer, to align navigation to the right in desktop -->
                <div class="android-header-spacer mdl-layout-spacer"></div>
                <div class="android-search-box mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right mdl-textfield--full-width">
                    <label class="mdl-button mdl-js-button mdl-button--icon" for="search-field">
							<i class="material-icons">search</i>
						</label>
                    <div class="mdl-textfield__expandable-holder">
                        <input class="mdl-textfield__input" type="text" id="search-field">
                    </div>
                </div>
                <!-- Navigation -->
                <div class="android-navigation-container">
                    <nav class="android-navigation mdl-navigation">
                        <a class="mdl-button mdl-js-button mdl-button--icon" href="../index.html">
							<i class="material-icons">home</i>
						</a>
                        <a class="mdl-navigation__link mdl-typography--text-uppercase" href="about.html">ನಮ್ಮ ಬಗ್ಗೆ</a>
                        <a class="mdl-navigation__link mdl-typography--text-uppercase" href="epaper.html">e-ಪೇಪರ್</a>
                        <a class="mdl-navigation__link mdl-typography--text-uppercase" href="subscribe.html">ನೋಂದಣಿ</a>
                        <a class="mdl-navigation__link mdl-typography--text-uppercase" href="contact.html">ಸಂಪರ್ಕಿಸಿ</a>
                        <a class="mdl-navigation__link mdl-typography--text-uppercase" href="../index-en.html">English</a>

                    </nav>
                </div>
                <span class="android-mobile-title mdl-layout-title">
						<img class="android-logo-image center" src="../img/savallogo.png">
					</span>
            </div>
            <div class="mdl-layout__header-row mdl-cell--hide-phone">
                <div class="mdl-layout-spacer"></div>
                <!-- Navigation -->
                <nav class="mdl-navigation">
                    <a class="mdl-navigation__link" href="category.html">ಮೈಸೂರು</a>
                    <a class="mdl-navigation__link" href="category.html">ಮಂಡ್ಯ</a>
                    <a class="mdl-navigation__link" href="category.html">ಕೊಡಗು</a>
                    <a class="mdl-navigation__link" href="category.html">ಚಾಮರಾಜನಗರ</a>
                    <a class="mdl-navigation__link" href="category.html">ಹಾಸನ</a>
                    <a class="mdl-navigation__link" href="category.html">ವಿಶೇಷ ಸುದ್ದಿಗಳು</a>
                </nav>
            </div>
        </header>

        <div class="android-drawer mdl-layout__drawer">
            <span class="mdl-layout-title"></span>
            <nav class="mdl-navigation">
                <a class="mdl-navigation__link mdl-typography--text-uppercase" href="../index.html">ಮುಖಪುಟ</a>
                <a class="mdl-navigation__link mdl-typography--text-uppercase" href="about.html">ನಮ್ಮ ಬಗ್ಗೆ</a>
                <div class="android-drawer-separator"></div>
                <a class="mdl-navigation__link" href="category.html">ಮೈಸೂರು</a>
                <a class="mdl-navigation__link" href="category.html">ಮಂಡ್ಯ</a>
                <a class="mdl-navigation__link" href="category.html">ಕೊಡಗು</a>
                <a class="mdl-navigation__link" href="category.html">ಚಾಮರಾಜನಗರ</a>
                <a class="mdl-navigation__link" href="category.html">ಹಾಸನ</a>
                <a class="mdl-navigation__link" href="category.html">ವಿಶೇಷ ಸುದ್ದಿಗಳು</a>
                <div class="android-drawer-separator"></div>
                <a class="mdl-navigation__link mdl-typography--text-uppercase" href="epaper.html">e-ಪೇಪರ್</a>
                <a class="mdl-navigation__link mdl-typography--text-uppercase" href="subscribe.html">ನೋಂದಣಿ</a>
                <a class="mdl-navigation__link mdl-typography--text-uppercase" href="contact.html">ಸಂಪರ್ಕಿಸಿ</a>
                <div class="android-drawer-separator"></div>
                <a class="mdl-navigation__link" href="../index-en.html">English Language</a>
                <a class="mdl-navigation__link" href="kanasu.org">www.kanasu.org</a>
                <a class="mdl-navigation__link" href="hracorg.ogmatech.in">www.hracorg.ogmatech.in</a>
            </nav>
        </div>
        <main class="mdl-layout__content">

            <!-- Main Section -->
            <section class="mdl-grid mdl-grid--no-spacing" style="background-color: #fff2f2">
                <!-- Empty space div -->
                <div class="mdl-cell mdl-cell--2-col-desktop mdl-cell--2-col-tablet mdl-cell--12-col-phone"></div>
                <!-- Main content div -->
                <div class="mdl-cell mdl-cell--8-col-desktop mdl-cell--8-col-tablet mdl-cell--12-col-phone">
                    <center><img class="header-img" src="../img/savalred.png" style="width: 60%; max-height: 200px"></center>
                    <section class="mdl-grid mdl-grid--no-spacing" style="padding-top: 8px;padding-bottom: 8px">
                        <div class="mdl-cell mdl-cell--3-col-desktop mdl-cell--12-col-phone datelinks">
                            <a href="https://play.google.com"><img style="object-fit: contain;width: 100%;height: 100%" src="../img/gplay.png"></a>
                        </div>
                        <div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--12-col-phone datelinks">
                            <center>
                                <div class="today_date" id="todayDate"></div>
                            </center>
                        </div>
                        <div class="mdl-cell mdl-cell--3-col-desktop mdl-cell--12-col-phone datelinks">
                            <center><a href="https://facebook.com"><img src="../img/facebook.png"></a>
                                <a href="https://twitter.com"><img src="../img/twitter.png"></a>
                                <a href="https://instagram.com"><img src="../img/instagram.png"></a>
                                <a href="https://youtube.com"><img src="../img/youtube.png"></a></center>
                        </div>
                    </section>

                    <center>
                        <h3>ಸವಾಲ್ ಇ-ಪೇಪರ್</h3>
                    </center>
                    <div class="head_divider"></div>
                    <!-- 1st Row -->
                    <div class="mdl-grid mdl-grid--no-spacing">
                        <!-- Empty space div -->
                        <div class="mdl-cell mdl-cell--2-col-desktop mdl-cell--1-col-tablet"></div>

                        <div id="large_content_div" class="content_card_2 mdl-cell mdl-cell--4-col-desktop mdl-cell--5-col-tablet mdl-cell--12-col-phone pdf_card">
                            <a href="epaperpdf.html"><img id="main-pdf-img" class="img_all" src="../img/pdf1.jpg"></a>
                            <div id="pdf-publish-date" class="today_date">July 10, 2018</div>
                        </div>

                        <div class="content_card_1 mdl-cell mdl-cell--4-col-desktop mdl-cell--5-col-tablet mdl-cell--12-col-phone pdf_card">
                            <div class="ad_content_1 mdl-cell mdl-cell--12-col-desktop mdl-cell--12-col-phone post_ad_img">
                                <section class="section--center mdl-grid mdl-grid--no-spacing">
                                    <a id="main-ad-link-1" href=""><img id="main-ad-img-1" class="ad_img_small img_all" src="../img/add1.jpg"></a>
                                </section>
                            </div>
                            <div class="ad_content_2 mdl-cell mdl-cell--12-col-desktop mdl-cell--12-col-phone post_ad_img">
                                <section class="section--center mdl-grid mdl-grid--no-spacing">
                                    <a id="main-ad-link-2" href=""><img id="main-ad-img-2" class="ad_img_small img_all" src="../img/add2.jpg"></a>
                                </section>
                            </div>
                        </div>

                        <!-- Empty space div -->
                        <div class="mdl-cell mdl-cell--2-col-desktop mdl-cell--1-col-tablet"></div>
                    </div>
                    <!-- End of 1st Row -->
                    <div class="head_divider"></div>
                    <!-- 2nd Row -->
                    <div id="epaper-content-div" class="mdl-grid mdl-grid--no-spacing">
                       
                    </div>
                    <div class="pagination_center" id="pagination"></div>
                </div>

                <div class="mdl-cell mdl-cell--2-col-desktop mdl-cell--2-col-tablet mdl-cell--12-col-phone"></div>
            </section>
            <footer class="docs-text-styling docs-footer mdl-mini-footer mdl-color--grey-900">
                <ul>
                    <li class="mdl-mini-footer--social-btn">
                        <a href="https://facebook.com" class="social-btn social-btn__facebook" role="button" title="Facebook"></a>
                    </li>
                    <li class="mdl-mini-footer--social-btn">
                        <a href="https://instagram.com" class="social-btn social-btn__instagram" role="button" title="Instagram"></a>
                    </li>
                    <li class="mdl-mini-footer--social-btn">
                        <a href="https://twitter.com" class="social-btn social-btn__twitter" role="button" title="Twitter"></a>
                    </li>
                    <li class="mdl-mini-footer--social-btn">
                        <a href="https://youtube.com" class="social-btn social-btn__youtube" role="button" title="Youtube"></a>
                    </li>
                </ul>
                <ul class="docs-link-list">
                    <li>Copyright © 2018 Saval News. All rights reserved.</li>
                </ul>
            </footer>
        </main>

    </div>
    <script type="text/javascript" src="../js/material.js"></script>
    <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../js/common.js"></script>
    <script type="text/javascript" src="../js/simplePagination.js"></script>


    <script>
        var epaper_full_data = ad_data = [];
        var no_of_items = noOfNewsPerPage = 5;
        var page_no = pageNumber = 0;
        var max_ads = 3;
        var latest_pub_date =0;
        var categoryIdList = ["All","Mysore","Mandya","Kodagu","Chamarajanagar","Hassan","Special News"];
        var firstTime = true;

        get_epaper_data();
        //get_ad_data();

        //function to get epaper data.......
        function get_epaper_data() {
            var debug = 0;
            var url = 'http://localhost:8092/api/get_latest_pdf?noOfNewsPerPage='+noOfNewsPerPage+'&pageNumber='+pageNumber;
            var type = 'GET';
            $.ajax({
                url: url,
                type: type,
                success: function(response) {
                    if (debug == 1) {
                        console.log(response);
                    } else {
                        epaper_full_data = response;
                        console.log(response);
                        initPage();
                        append_epaper_data();
                    }
                },
                error: function(jqXHR, exception, response) {
                    $("#loading_gif_div").fadeOut(100);
                    alert('Error!');
                }
            });
        }

        function initPage(){
            if(firstTime == true){
                firstTime = false;
                 $(function() {
                    $("#pagination").pagination({
                        items: epaper_full_data.totalElements,
                        itemsOnPage: no_of_items,
                        useAnchors : false,
                        cssStyle: 'light-theme'
                    });
                });
            }
        }
        //function to append news data................
        function append_epaper_data() {
            if (epaper_full_data.content.length == 0) {
                alert("No news found");
                return;
            }
           
            
            var epaper_content_div = $('#epaper-content-div');
            epaper_content_div.empty();
            $.each(epaper_full_data.content, function(key, value) {
                var content_div = $("<div></div>").addClass("mdl-cell mdl-cell--3-col-desktop mdl-cell--6-col-tablet mdl-cell--12-col-phone pdf_card");
                var content_a = $("<a></a>").prop("href","epaperpdf.html?"+value.idSavalEpaper);
                var content_img = $("<img></img>").addClass("img_all").prop("src","../img/"+value.savalEpaperImg);
                var pub_date = new Date(value.savalEpaperPublishDate).toDateString();
                var content_date_div = $("<div></div>") .addClass("today_date").html(pub_date);
                
                content_a.append(content_img);
                content_div.append(content_a);
                content_div.append(content_date_div);
                epaper_content_div.append(content_div);
                
                if(latest_pub_date < value.savalEpaperPublishDate){
                    latest_pub_date = value.savalEpaperPublishDate;
                    $('#large_content_div').empty();
                    var lg_content_a = $("<a></a>").prop("href","epaperpdf.html?"+value.idSavalEpaper);
                    var lg_content_img = $("<img></img>").addClass("img_all").prop("src","../img/"+value.savalEpaperImg);
                    var pub_date = new Date(value.savalEpaperPublishDate).toDateString();
                    var lg_content_date_div = $("<div></div>").addClass("today_date").html(pub_date);
                    lg_content_a.append(lg_content_img);
                    $('#large_content_div').append(lg_content_a);
                    $('#large_content_div').append(lg_content_date_div);
                }
                
            });
        }
        
        function updatePage(selectedPageNumber){
            pageNumber = selectedPageNumber - 1;
            get_news_data();
            $(function() {
                $("#pagination").pagination('drawPage', selectedPageNumber);
            });
        }

        //function to get ad data..............
        function get_ad_data() {

            $("#loading_gif_div").fadeIn(100);
            var debug = 0;
            var url = '../news/get_ad_data';
            var type = 'POST';

            $.ajax({
                url: url,
                type: type,
                success: function(response) {
                    $("#loading_gif_div").fadeOut(100);
                    if (debug == 1) {
                        console.log(response);
                    } else {
                        var js_response = JSON.parse(response);
                        var result = js_response.result;
                        ad_data = js_response;
                        append_ad_data();
                    }
                },
                error: function(jqXHR, exception, response) {
                    $("#loading_gif_div").fadeOut(100);
                    alert('Error!');
                }
            });
        }

        //function to append ad data................
        function append_ad_data() {
            if (ad_data.length <= 0) {
                return;
            }

            ad_id = 1;
            $.each(ad_data, function(key, value) {
                if (ad_id > max - ads) {
                    return;
                }

                //    main-ad-img-1
                //    main-ad-link-1

                //ad-img link...........
                $('#main-ad-img-' + card_id).prop('src', value['ad-img']);

                //ad link..............
                $('#main-ad-link-' + card_id).prop('href', value['main-ad-link']);

                ad_id++;
            })
        }
    </script>
</body>

</html>